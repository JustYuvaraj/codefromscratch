{"version":3,"file":"UserContestInfo.js","sources":["../../../src/components/contestInfo/UserContestInfo.tsx"],"sourcesContent":["import { forwardRef, memo, useCallback, useMemo, useState } from 'react';\r\nimport { useFetch } from '../../hooks';\r\nimport { type UserContestInfo as TUserContestInfo } from '../../types';\r\nimport leetcodeQuery from '../../utils/leetcodeQuery';\r\nimport ContestGraph from './ContestGraph';\r\nimport { getCordinates } from '../../utils';\r\nimport ContestStaticData from './ContestStaticData';\r\nimport LoadingOrError from '../LoadingOrError';\r\nimport DynamicContestData from './DynamicContestData';\r\nimport '../../index.css';\r\nexport type Props = {\r\n  userName: string;\r\n  theme?: {\r\n    primaryColor?: string;\r\n    secondaryColor?: string;\r\n    bgColor?: string;\r\n  },\r\n  loadingComponent?: JSX.Element;\r\n}\r\n\r\n/**\r\n * Component for displaying user's contest information.\r\n * \r\n * Props for the UserContestInfo component.\r\n * @property {string} userName - The username of the user.\r\n * @property {object} [theme] - The theme configuration.\r\n * @property {string} [theme.primaryColor=\"rgba(34,211,238,1)\"] - The primary color.\r\n * @property {string} [theme.secondaryColor=\"rgba(209,213,219,1)\"] - The secondary color.\r\n * @property {string} [theme.bgColor=\"rgba(68,64,60,1)\"] - The background color.\r\n\r\n * @param {Props} props - The props object.\r\n * @param {React.Ref<HTMLDivElement>} ref - The ref to attach to the component's root element.\r\n * @returns {JSX.Element} - The JSX element representing the UserContestInfo component.\r\n */\r\nconst UserContestInfo = forwardRef<HTMLDivElement, Props>(({\r\n  userName,\r\n  theme = {\r\n    primaryColor: \"rgba(34,211,238,1)\",\r\n    secondaryColor: \"rgba(209,213,219,1)\",\r\n    bgColor: \"rgba(68,64,60,1)\"\r\n  },\r\n  loadingComponent\r\n}: Props, ref) => {\r\n\r\n  const [activeIndex, setActiveIndex] = useState(-1);\r\n\r\n  const fetchData = useCallback(() => {\r\n    return leetcodeQuery.fetchUserContestDetails(userName);\r\n  }, [userName]);\r\n\r\n  const { data, loading: isLoading, error } = useFetch<TUserContestInfo>(fetchData);\r\n\r\n  const { userContestRankingHistory: history, userContestRanking } = data || {};\r\n\r\n  const points = useMemo(() => {\r\n    if (!history) return []\r\n    return getCordinates(history);\r\n  }, [history]);\r\n\r\n  if (!data || isLoading || error) return (\r\n    <LoadingOrError error={error} loading={isLoading} loadingComponent={loadingComponent} />\r\n  );\r\n\r\n  return (\r\n    <div\r\n      id=\"user_contest_info_container\"\r\n      ref={ref}\r\n      className='w-full p-4 rounded-lg h-full'\r\n      style={{ background: theme.bgColor }}\r\n    >\r\n      {activeIndex === -1 ? (\r\n        <ContestStaticData contestData={userContestRanking!} />\r\n      ) : (\r\n        <DynamicContestData contestData={data.userContestRankingHistory[activeIndex]} />\r\n      )}\r\n      <ContestGraph\r\n        activeIndex={activeIndex}\r\n        setActiveIndex={setActiveIndex}\r\n        data={points}\r\n      />\r\n    </div>\r\n  )\r\n})\r\n\r\nconst MemoizedUserContestInfo = memo(UserContestInfo);\r\n\r\nexport default MemoizedUserContestInfo;"],"names":["UserContestInfo","forwardRef","userName","theme","loadingComponent","ref","activeIndex","setActiveIndex","useState","fetchData","useCallback","leetcodeQuery","data","isLoading","error","useFetch","history","userContestRanking","points","useMemo","getCordinates","jsx","LoadingOrError","jsxs","ContestStaticData","DynamicContestData","ContestGraph","MemoizedUserContestInfo","memo"],"mappings":";;;;;;;;;AAkCA,MAAMA,IAAkBC,EAAkC,CAAC;AAAA,EACzD,UAAAC;AAAA,EACA,OAAAC,IAAQ;AAAA,IACN,cAAc;AAAA,IACd,gBAAgB;AAAA,IAChB,SAAS;AAAA,EACX;AAAA,EACA,kBAAAC;AACF,GAAUC,MAAQ;AAEhB,QAAM,CAACC,GAAaC,CAAc,IAAIC,EAAS,EAAE,GAE3CC,IAAYC,EAAY,MACrBC,EAAc,wBAAwBT,CAAQ,GACpD,CAACA,CAAQ,CAAC,GAEP,EAAE,MAAAU,GAAM,SAASC,GAAW,OAAAC,MAAUC,EAA2BN,CAAS,GAE1E,EAAE,2BAA2BO,GAAS,oBAAAC,EAAmB,IAAIL,KAAQ,CAAA,GAErEM,IAASC,EAAQ,MAChBH,IACEI,EAAcJ,CAAO,IADP,IAEpB,CAACA,CAAO,CAAC;AAER,SAAA,CAACJ,KAAQC,KAAaC,IACvBO,gBAAAA,EAAAA,IAAAC,GAAA,EAAe,OAAAR,GAAc,SAASD,GAAW,kBAAAT,EAAoC,CAAA,IAItFmB,gBAAAA,EAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,IAAG;AAAA,MACH,KAAAlB;AAAA,MACA,WAAU;AAAA,MACV,OAAO,EAAE,YAAYF,EAAM,QAAQ;AAAA,MAElC,UAAA;AAAA,QAAAG,MAAgB,KACfe,gBAAAA,EAAAA,IAACG,GAAkB,EAAA,aAAaP,EAAqB,CAAA,IAEpDI,gBAAAA,EAAAA,IAAAI,GAAA,EAAmB,aAAab,EAAK,0BAA0BN,CAAW,GAAG;AAAA,QAEhFe,gBAAAA,EAAA;AAAA,UAACK;AAAAA,UAAA;AAAA,YACC,aAAApB;AAAA,YACA,gBAAAC;AAAA,YACA,MAAMW;AAAA,UAAA;AAAA,QACR;AAAA,MAAA;AAAA,IAAA;AAAA,EAAA;AAGN,CAAC,GAEKS,IAA0BC,EAAK5B,CAAe;"}